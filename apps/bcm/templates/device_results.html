[[extend 'layout.html']]
<link rel="stylesheet" href="css/style.css">

<div>Checked Results: {{ checked_results }}</div>
<button
  type="button" class="btn btn-primary" @click="button_compare_results(checked_results)">Compare
</button>

[[command_set = set([res['command_name'] for res in results])]]
[[command_list = sorted(list(command_set))]]
<select name="select-command" class="form-select form-select-sm" aria-label=".form-select-sm example">
  <option selected>Select a command to review</option>
[[for cmd in command_list:]]
  <option value="[[=cmd]]">[[=cmd]]</option>
[[pass]]
</select>

<button
  type="button" class="btn btn-primary" @click="bcm_button_compare_results(checked_results)">Compare
</button>

<div class="section">
  <h5>Device: [[=results[0]['device_name']]]</h5>
  [[if limit:]]
  <div>
    <span>Last [[=limit]] Results:</span>
    <span>
      <a href="[[=URL('devices', device_id, 'results')]]"> 
        View All [[=results[0]['device_name']]] Results</a>
    </span>
  </div>
  [[else:]]
  <div>
    <span>All Results:</span>
    <span>
      <a href="[[=URL('devices', device_id, 'partialresults')]]"> 
        View Fewer [[=results[0]['device_name']]] Results</a>
    </span>
  </div>
  [[pass]]
  <div class="vars">
    <table>
      <tr>
        <th>Result ID</th>
        <th>Command</th>
        <th>Last ran</th>
        <th>Status</th>
        <th>Result</th>
        <th>Comparison (check 2 boxes)</th>
      </tr>
      [[for result in results:]]
      <tr>
        <td>[[=result['id']]]</td>
        <td>[[=result['command_name']]]</td>
        <td>[[=result['completed_at']]]</td>
        <td>[[=result['status']]]</td>
        <td>[[=result['result']]]</td>
        <td>
          <div class="form-check">
            <input class="form-check-input"
              type="checkbox" value="[[=result['id']]]" id="result-id=[[=result['id']]]"
              v-model="checked_results">
            <label class="form-check-label" for="result-id=[[=result['id']]]">
              <div>Check 2 results to compare</div>
            </label>
          </div>
        </td>
      </tr>
      [[pass]]
    </table>
  </div>
</div>